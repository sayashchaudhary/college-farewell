<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Farewell</title>
    <link href="../css/home.css" rel="stylesheet" type="text/css">
    <link href="../css/counter.css" rel="stylesheet" type="text/css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>
<body>
<script type="text/javascript" src="../js/home.js"></script>

<!--HOME PAGE-->
<nav class="navbar navbar-fixed-top">
    <div class="container" style="background-color: transparent;margin-top: 1%">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#" style="font-size: 3rem">WebSiteName</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav" style="float: right">
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Gallery</a></li>
                <li><a href="#">Finalists</a></li>
                <li><a href="#">Convenors</a></li>
                <li><a href="#">Web Team</a></li>
            </ul>
        </div>
    </div>
</nav>

    <section class="landing">
        <div class="container">
            <div class="title">
                <h1 data-text="AMANTRYA"><span>AMANTRYA</span></h1>
                <h3>F A R E W E L L <strong>2 0 1 9</strong></h3>
                <div class="count">
                    <div class="counts">
                        <span id="days">00</span>Days
                    </div>
                    <div class="counts">
                        <span id="hours">00</span>Hours
                    </div>
                    <div class="counts">
                        <span id="minutes">00</span>Minutes
                    </div>
                    <div class="counts">
                        <span id="seconds">00</span>Seconds
                    </div>
                </div>
                <div class="svg-wrapper">
                    <svg height="60" width="320" xmlns="http://www.w3.org/2000/svg">
                        <rect class="shape" height="60" width="320" />
                    </svg>
                    <a href="#" style="text-decoration: none">
                        <div class="text">VOTE NOW</div>
                    </a>
                </div>
                <div class="scroll">
                    <a href="#"><span></span></a>
                </div>
            </div>
        </div>
    </section>

</body>
<script>


    let particles = []
    let microparticles = []

    const c1 = createCanvas({width: $(window).width(), height: $(window).height()})

    const tela   = c1.canvas;
    const canvas = c1.context;

    // $("body").append(tela);
    $(".landing").append(c1.canvas);


    class Particle{
        constructor(canvas){
            this.random = Math.random()
            this.random1 = Math.random()
            this.random2 = Math.random()
            this.progress = 0;
            this.canvas = canvas;
            this.life = 1000 + (Math.random()*3000)

            this.x = ($(window).width()/2)  + (Math.random()*20 - Math.random()*20)
            this.y = $(window).height()
            this.s = 2 + Math.random();
            this.w = $(window).width()
            this.h = $(window).height()
            this.direction = this.random > .5 ? -1 : 1
            this.radius = 1 + (3 * this.random)
            this.color  = "#ff417d"

            this.ID = setInterval(function(){
                microparticles.push(new microParticle(c1.context,{
                    x: this.x,
                    y: this.y
                }))
            }.bind(this), this.random*20)

            setTimeout(function(){
                clearInterval(this.ID)
            }.bind(this), this.life )
        }

        render(){
            this.canvas.beginPath();
            this.canvas.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
            // this.canvas.lineWidth = 2;
            this.canvas.shadowOffsetX = 0;
            this.canvas.shadowOffsetY = 0;
            // this.canvas.shadowBlur = 6;
            this.canvas.shadowColor = "#000000";
            this.canvas.fillStyle = this.color;
            this.canvas.fill();
            this.canvas.closePath();
        }

        move(){
            this.x -= (this.direction) * Math.sin(this.progress/((this.random1*430))) * this.s;
            this.y -= Math.cos(this.progress/this.h) * this.s;

            if(this.x < 0 || this.x > this.w - this.radius){
                clearInterval(this.ID)
                return false
            }

            if(this.y < 0){
                clearInterval(this.ID)
                return false
            }
            this.render()
            this.progress++
            return true
        }
    }

    class microParticle{
        constructor(canvas, options){
            this.random = Math.random()
            this.random1 = Math.random()
            this.random2 = Math.random()
            this.progress = 0;
            this.canvas = canvas;

            this.x = options.x
            this.y = options.y
            this.s = 2 + Math.random() * 3;
            this.w = $(window).width()
            this.h = $(window).height()
            this.radius = 1 + this.random*0.5
            this.color  = "#4EFCFE";//this.random > .5 ? "#a9722c" : "#FFFED7"
        }

        render(){
            this.canvas.beginPath();
            this.canvas.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
            this.canvas.lineWidth = 2;
            this.canvas.fillStyle = this.color;
            this.canvas.fill();
            this.canvas.closePath();
        }

        move(){
            this.x -= Math.sin(this.progress/(100/(this.random1 - this.random2*10))) * this.s;
            this.y += Math.cos(this.progress/this.h) * this.s;

            if(this.x < 0 || this.x > this.w - this.radius){
                return false
            }

            if(this.y > this.h){
                return false
            }
            this.render()
            this.progress++
            return true
        }
    }

    var random_life = 1000


    setInterval(
        function(){
            particles.push(new Particle(canvas))
            random_life = 2000 * Math.random()
        }.bind(this)
        , random_life)

    function clear(){
        let grd = canvas.createRadialGradient(tela.width/2, tela.height/2, 0, tela.width/2, tela.height/2, tela.width);
        grd.addColorStop(0,"black");
        grd.addColorStop(1,"rgba(26,14,4,0)");
        // Fill with gradient
        canvas.globalAlpha=0.16;
        canvas.fillStyle=grd;
        canvas.fillRect(0, 0, tela.width, tela.height);
    }

    function blur(ctx,canvas, amt) {
        // ctx.filter = `blur(${amt}px)`
        // ctx.drawImage(canvas, 0, 0)
        // ctx.filter = 'none'
    }

    function update(){
        clear();
        particles = particles.filter(function(p) {
            return p.move()
        })
        microparticles = microparticles.filter(function(mp) {
            return mp.move()
        })
        requestAnimationFrame(update.bind(this))
    }


    function createCanvas(properties){
        let canvas = document.createElement('canvas');
        canvas.width = properties.width;
        canvas.height = properties.height;
        let context = canvas.getContext('2d');
        return {
            canvas: canvas,
            context: context
        }
    }
    update()
</script>

<!--SCROLL BUTTON-->
<script>
    $(function() {
        $('a[href*=#]').on('click', function(e) {
            e.preventDefault();
            $('html, body').animate({ scrollTop: $($(this).attr('href')).offset().top}, 500, 'linear');
        });
    });
</script>
</html>